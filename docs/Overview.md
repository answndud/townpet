# TownPet OVERVIEW (Master Doc)

- Last updated: 2026-01-06
- Purpose: TownPet 프로젝트의 **비즈니스/제품/운영/기술/배포/수익화**를 단일 문서로 통합 요약하여, 문서 세트(`/docs/*`)를 “실행 가능한 계획”으로 연결한다.

---

## 1) 한 줄 정의

**TownPet**은 **동네 기반(Local) 반려생활 인프라**(병원·동반 가능 식당/카페, 산책로, 번개/펫친소, 마켓·대여·나눔, 긴급 돌봄, 실종/유기 알림)를 제공하면서, 동시에 **지역 무관(Global) 지식 축적**(품종 토픽, Q&A 채택, 사료/용품 DB, 전문가 콘텐츠)을 통해 검색성과 전문성을 확보하는 플랫폼이다.

---

## 2) 제품 구조의 핵심: Local vs Global 분리

TownPet의 핵심은 “커뮤니티”가 아니라 **두 종류의 문제를 서로 방해하지 않게** 해결하는 구조다.

### 2.1 Local(동네 기반)에서 해결하는 문제
- 병원/동반 가능 장소/산책로 같은 **생활 밀착형 정보**는 “최신성”과 “거리”가 본질
- 번개/펫친소/긴급 돌봄/실종 알림 같은 기능은 **즉시성**과 **위치 기반 네트워크 효과**가 본질
- 따라서 Local은 “검색 유입”보다 **리텐션/재방문**이 성공 기준

### 2.2 Global(지역 무관)에서 해결하는 문제
- 품종/사료/행동 교정/건강 등은 **축적되는 지식**이 본질
- Q&A 채택/DB/전문가 콘텐츠는 시간이 지날수록 가치가 커지는 **지식 자산**
- 따라서 Global은 “리텐션”보다 **검색성/전문성/정합성**이 성공 기준

### 2.3 운영/정책도 분리해야 하는 이유
- Local은 업체/스팸/분쟁이 빠르게 유입된다(마켓/구인/돌봄)
- Global은 “의학·훈련 조언” 영역에서 오해/책임 이슈가 생긴다
- 한 정책으로 묶으면 둘 다 망가진다. Local/Global은 노출, 검색, 신고, 제재 기준을 **분리 설계**한다.

---

## 3) 제공 기능(확정 스코프 기준)

## 3.1 Local(동네 기반) 주요 기능
1) **동네 인프라 비교**
- 병원 템플릿 리뷰: 방문일, 진료 항목, 비용, 대기시간 (+ 선택: 영수증/항목별 금액)
- 동반 가능 장소: 애견카페 외에 **동반 가능 식당/테라스 카페** 등 생활형 장소 포함
- 목적: “오늘 어디를 가야 덜 기다리고, 얼마 정도 나오나”의 실전 의사결정

2) **산책로 공유(지도)**
- 코스 난이도, 가로등 유무, 화장실 위치 등 **안전/환경 태그** 중심
- 목적: 위험 요소를 회피하고 반복 사용 가능한 “검증된 코스” 축적

3) **산책 메이트 & 펫친소**
- 실시간 번개 모임(“지금 공원 오실 분?”)
- 동네 친구 프로필 탐색
- 목적: 동네 네트워크 효과(사람이 붙으면 콘텐츠가 돈다)

4) **마켓 & 대여 & 나눔**
- 사료 나눔, 용품 대여, 중고 거래
- 대여는 보증금/기간/인수·반납 체크리스트로 분쟁 최소화

5) **심부름/긴급 돌봄(마이크로 펫시팅)**
- 단시간 돌봄/산책/급식/병원 동행 같은 “마이크로 요청”
- 초기에는 결제 없이도 “요청/매칭/후기”로 수요 검증 가능

6) **실시간 유기동물/실종 신고**
- 발견 즉시 위치 기반 푸시로 인근 주민에게 확산(골든타임)
- 전단지 대체: 디지털 전단 + 제보(위치/사진/시간) 수집

---

## 3.2 Global(지역 무관) 주요 기능
1) **품종별 토픽**
- 견종/묘종별 유전병, 성격, 훈련법 등 특화 커뮤니티

2) **Q&A 시스템(답변 채택)**
- 지식 축적을 위한 구조(채택/업보트/정렬)
- 중복 질문 억제(유사 질문 추천)

3) **사료/용품 DB**
- 성분 분석, 알러지 유발 성분 필터, 실사용 리뷰
- “문제(알러지/설사/기호성) → 성분 기반 후보군”으로 연결

4) **전문가 콘텐츠**
- 수의사/훈련사 등의 기고형 가이드
- 신뢰를 얻기 위해 자격/면책/검수 정책이 필요

---

## 4) 비즈니스 모델(확정 BM 기준 + 실행 순서)

### 4.1 Local BM
1) **지역 타겟 광고**
- 병원/미용실/카페의 상단 노출, 쿠폰 발행
- 초기에는 “프로필 강화 + 상단 노출”부터 시작하는 것이 운영 비용이 가장 낮음

2) **중개 수수료**
- 펫시팅/도그워커 매칭 및 예약 시스템 수수료
- 결제/분쟁/환불이 붙는 순간 운영 복잡도가 급증하므로, Phase 후반으로 둔다

3) **동네 공동구매**
- 사료/모래 등 부피 큰 상품을 이웃끼리 공동 구매하여 배송비 절감
- 초기 검증은 “모집/마감”만으로도 가능(결제는 나중)

4) **유기견 홍보 & 유기견 봉사 모집**
- 직접 수익보다 “신뢰/브랜드”를 쌓고 로컬 네트워크를 강화하는 역할
- 장기적으로 파트너십(보호소/단체/기업)과 연결 가능

### 4.2 Global BM
1) **어필리에이트(제휴)**
- 알러지/상황 기반 추천 + 구매 링크 수익
- 핵심은 “광고 추천”이 아니라 “정보 기반 필터 추천”으로 신뢰를 유지하는 것

2) **프리미엄 멤버십**
- 광고 제거, 전문가 유료 상담권, 멤버십 특가
- 조건: 유의미한 재방문과 콘텐츠 소비가 먼저 나와야 한다

3) **데이터 비즈니스**
- 보험 매칭, 제조사 리포트
- 반드시 “동의/가명/집계” 기반으로만 가능하며, 이 영역은 Phase 5 이후로 둔다

---

## 5) 성공 조건(KPI) — ‘성공’의 정의를 먼저 고정

### 5.1 Local KPI
- 7일 리텐션(동네 코호트)
- 템플릿 완성률(방문일/항목/비용/대기 입력)
- 저장률/검색 사용률
- (Lost&Found) 알림 도달→제보 전환, 평균 제보 시간

### 5.2 거래/돌봄 KPI
- 문의율(조회 대비), 성사율(문의 대비 완료)
- 분쟁/신고율(거래/요청 단위)
- 완료율/노쇼율(번개/돌봄)

### 5.3 Global KPI
- 질문당 답변 수, 채택률
- 검색 유입(자연 검색), 검색→체류 시간
- DB 재방문률(제품 페이지 반복 조회)

---

## 6) 운영/신뢰 시스템(커뮤니티의 생존 조건)

TownPet은 기능보다 “운영 자동화”가 생존을 좌우한다.

### 6.1 신뢰 시스템(초기 최소)
- 가입 기간/활동 점수/동네 설정 완료 여부로 기능 제한
  - 예: 신규 계정은 마켓/돌봄/긴급 신고 제한
- 신고 누적 기반 자동 숨김(HIDDEN) + 관리자 큐
- 링크/연락처 노출 제한(스팸 억제)
- 관리자 조치 Audit Log 기록(면접에서 강한 포인트)

### 6.2 의료/전문 영역 리스크
- Global의 건강/훈련 콘텐츠는 “경험 공유”와 “진단/처방”을 분리
- 전문가 콘텐츠는 자격/면책/검수 정책을 문서로 고정

---

## 7) 기술/아키텍처(Back-end Spring Boot 전제)

### 7.1 기본 방향: 모듈러 모놀리스
- 단일 Spring Boot 애플리케이션에서 도메인 모듈로 분리
- 초기 배포/운영을 단순화하면서도 확장 포인트(이벤트/검색/알림)를 구조로 남긴다

### 7.2 권장 스택
- Backend: Java 21 (LTS), Spring Boot 3.x, Spring Security
  - MVP(SSR): 세션 + CSRF (Thymeleaf/HTMX 최적)
  - 확장(API): OAuth2 + JWT (모바일/외부 API 제공 시)
- Data: PostgreSQL 16+ + JPA + QueryDSL 5.1.0+, Flyway
- Cache/RateLimit: Redis
- Storage: S3/R2 + presigned upload
- Search: Postgres FTS(초기) → Meilisearch/OpenSearch(확장)
- Async(선택): RabbitMQ/Kafka or Outbox + Scheduler
- Observability(선택): Micrometer, Sentry, JSON logs, traceId

### 7.3 프론트 권장(미니멀 SSR, JS 지식 얕은 1인 개발자 전제)
- **Spring Boot MVC + Thymeleaf(SSR)**: 페이지 렌더링(SEO/OG 포함)을 서버가 책임
- **HTMX**: 리스트/댓글/모달/검색 등 “부분 갱신”을 HTML 교체로 처리
- **Tailwind CSS**: 빠른 UI 구성(초기 CDN → 성장 시 빌드 전환)
- **Alpine.js(선택)**: 드롭다운/모달 토글 같은 “아주 작은 상태”만 보완
- **지도**: 카카오/네이버 SDK는 특정 화면에서만 최소 JS로 통합
- **라우팅 원칙(권장)**
  - `/p/**` : Full Page(레이아웃 포함)
  - `/f/**` : HTML Fragment(HTMX swap 전용)
  - `/api/**` : JSON(지도/업로드/푸시 등 “특수 기능”에만 제한)

---

## 8) 배포/운영(최소 재현 가능한 형태)

### 8.1 최소 운영 구성(SSR 기준: FE/BE 분리 배포 불필요)
- **Web(App)**: Spring Boot 컨테이너 1개가 SSR 페이지 + fragment + 정적 자산을 함께 서빙
  - (선택) 정적 자산만 CDN/Nginx로 분리 가능하지만 MVP에서는 과투자
- DB: Managed Postgres
- Redis: Managed Redis
- Storage: S3/R2

### 8.2 CI/CD 최소
- PR: 빌드/테스트
- main merge: Docker build/push + deploy
- Flyway 마이그레이션 적용 후 배포

---

## 9) 단계별 로드맵(현재 문서 세트와 일치)

- Phase 1: Local UGC 코어(병원/장소 템플릿 + 산책로 지도 + 운영 기본)
- Phase 2: 번개/펫친소 + 마켓/대여/나눔 + 실종/유기 알림
- Phase 3: Global(품종/Q&A/DB) + 마이크로 돌봄(결제 없이)
- Phase 4: 광고/부스팅 + 멤버십 + 공동구매 + 결제/정산
- Phase 5: 데이터/파트너십(보험/제조사 리포트)

---

## 10) 리스크 & 대응(미리 적어둬야 나중에 덜 망한다)

### 10.1 스팸/업자/사기
- 마켓/구인/돌봄은 스팸이 “기본값”
- 대응: 기능 제한(신규), 링크 제한, rate limit, 자동 블라인드, 신고 큐

### 10.2 실종/유기 기능 악용
- 허위 긴급 신고는 플랫폼 신뢰를 즉시 파괴
- 대응: 생성 조건 강화 + 빠른 운영자 검토 큐 + 반복 악용 제재

### 10.3 의료/전문 조언 책임
- “진단/처방”처럼 보이는 문구는 법·민원 리스크
- 대응: 면책/표준 문구 + 전문가 콘텐츠 검수/표기 규정

### 10.4 운영 비용 폭증(결제/수수료 도입 시)
- 결제는 단순히 기능이 아니라 CS/환불/분쟁 시스템을 의미
- 대응: Phase 후반, 정책/증빙/로그 체계를 먼저 갖춘다

---

## 11) 이 문서 세트를 어떻게 사용할 것인가(실행 가이드)

### 11.1 개발 시작 순서(권장)
1) `/docs/02_product/03_mvp_scope_v1.md`에서 Phase 1 확정
2) `/docs/05_backend/02_endpoints.md`로 API 스켈레톤 생성
3) `/docs/05_backend/01_database_schema.md` 기반으로 Flyway DDL 작성
4) `/docs/03_policy_ops/02_moderation_rules.md` 룰을 코드로 반영
5) `/docs/07_infra/02_ci_cd.md`로 최소 CI/CD 연결

### 11.2 면접/이력서로 전환하는 방법
- “기능”이 아니라 아래를 강조한다
  - 커서 페이지네이션 + 인덱스 전략
  - 운영 정책 엔진(신고→블라인드)
  - Redis rate limit/스팸 방지
  - Testcontainers 통합 테스트 + CI/CD + Docker 배포
  - 이벤트 기반 비동기 처리(선택)

---

## 12) 문서 링크(상세 문서로 이동)

- 비즈니스: `docs/01_business/*`
- 제품/기능/ERD: `docs/02_product/*`
- 운영/정책: `docs/03_policy_ops/*`
- 아키텍처/API 규약: `docs/04_architecture/*`
- 백엔드 상세: `docs/05_backend/*`
- 프론트/PWA/지도: `docs/06_frontend/*`
- 인프라/배포: `docs/07_infra/*`
- 지표/결제/실험: `docs/08_data_analytics/*`
- 보안/개인정보: `docs/09_security/*`
- 로드맵/백로그: `docs/10_roadmap/*`

---

## 13) 용어(간단 Glossary)
- **Local**: 동네 기반 기능/피드/검색/알림
- **Global**: 지역 무관 지식 축적(검색 유입 중심)
- **템플릿 게시물**: 자유서술보다 구조화 필드가 먼저인 콘텐츠(비용/대기/조건 등)
- **자동 블라인드**: 신고/정책 조건 충족 시 게시물을 자동 숨김 처리(HIDDEN)
- **마이크로 펫시팅**: 짧은 시간 단위의 돌봄/심부름 요청
- **골든타임**: 실종/유기 상황에서 발견 확률이 급격히 떨어지기 전의 시간 구간