# 01. 보안 기본 체크리스트

## 1) 인증/인가
- **MVP(SSR/HTMX)**: 세션 기반 인증 + CSRF 활성화 (권장)
  - OAuth2 로그인(카카오/구글) → 세션 쿠키(HttpOnly, Secure)
- **확장(API 분리 시)**: JWT 도입
  - OAuth2 로그인 + JWT (Access + Refresh)
- 역할/권한 기반 접근 제어
- 민감 액션(긴급 신고/마켓/돌봄)은 추가 정책(가입 기간/활동점수/동네 인증)

## 2) 입력 검증
- Bean Validation + 서버측 검증
- XSS 방지(본문 sanitization, 프론트 escaping)
- 업로드 파일 MIME/크기 제한

## 3) 어뷰징 방지 (Rate Limit)
- Redis 기반 rate limit 적용
- **권장 기본값**:
  | 엔드포인트 | 제한 |
  |-----------|------|
  | 로그인 시도 | 5회/분 |
  | 게시글 작성 | 10회/시간 |
  | 댓글 작성 | 30회/시간 |
  | 검색 | 60회/분 |
  | 신고 | 10회/일 |
  | 실종 알림 생성 | 3회/일 |
- 신고 남용 탐지(동일 사용자 반복 신고 제한)
- 링크/연락처 도배 제한(구인/마켓)

## 4) 로깅/감사
- 주요 보안 이벤트 로그(로그인 실패, 제재, 긴급 신고)
- 관리자 조치 Audit Log

## 5) 취약점 대응
- 의존성 업데이트 정책 (월 1회 dependabot 또는 수동 점검)
- **JWT Secret Rotation 계획** (API 확장 시):
  - 키 버전 관리: 현재 키 + 이전 키 동시 검증 (1주 grace period)
  - 자동 rotation: 90일 주기 권장
  - 긴급 rotation: 즉시 신규 키 발급 → 기존 키 24시간 내 폐기

