# 05. 테스트 전략

## 1) 테스트 피라미드
- Unit Test: 도메인 서비스/정책 엔진
- Integration Test: Repository/QueryDSL/트랜잭션
- API Test: 인증/권한/에러 포맷
- E2E(선택): 핵심 플로우(작성→검색→신고)

## 2) 통합 테스트 환경
- Testcontainers로 Postgres/Redis 실행
- Flyway 마이그레이션 적용 후 테스트 시작
- 데이터 픽스처는 최소화하고, 빌더/팩토리 패턴 사용

## 3) 반드시 커버할 시나리오
- 템플릿 필수 필드 누락 시 400
- 동네 스코프 필터가 정확히 적용되는지
- 신고 누적 → 자동 숨김 전환
- 마켓 상태 전이(AVAILABLE→RESERVED→DONE) 제약
- 실종/유기 긴급 생성 권한 체크(신규 계정 제한)

## 4) 성능 테스트(선택)
- k6로 피드/검색/작성 TPS 기준 설정
- 목표: 피드 p95 < 300ms(초기 기준, 환경에 따라 조정)
